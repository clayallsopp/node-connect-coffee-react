# connect-coffee-react

It provide a simple [Connect] middleware to serve CoffeeScript files with JSX support via [coffee-react](https://www.npmjs.com/package/coffee-react).

# Installation

Using npm:

```bash
npm install connect-coffee-react
```

Usage
-----

Function returning a [Connect] middleware with the given `options`.

Options:

*   `force`         Always re-compile
*   `src`           Source directory used to find .coffee files
*   `dest`          Destination directory used to output .js files when undefined defaults to `src`
*   `compile`       Custom compile function, accepting the arguments `(str, options)`
*   `bare`          Compile without a top-level function wrapper
*   `baseDir`       Base directory for path resolution
*   `newPrefix`     Use the new declaration (`//#` instead of `//@`)
*   `prefix`        Path which should be stripped from `src`
*   `sourceMap`     Generates source map files
*   `sourceMapRoot` but added back to the sourceMap url.

Basic example
-------------

Here we will setup the middleware with only the required `src` option.

```javascript
var coffeescript = require('connect-coffee-react');
var connect = require('connect');

var app = connect();

app.use(coffeescript({
  src: __dirname,
  bare: true
}));

app.use(connect.static(__dirname + '/public'));

app.listen(3000)
```

Advanced example
----------------

Here we set up the custom compile function so that we may
set the `bare` option, or define additional functions.

By default the compile function simply renders the JavaScript.

```javascript
function compile(str, options, coffeePath) {
  options.bare = true;
  return coffeeScript.compile(str, options);
}
```

Pass the middleware to [Connect], grabbing "*.coffee" files from this directory
and saving .js files to _./public_. Also supplying our custom `compile` function.

Following that we have a `static()` layer setup to serve the .js
files generated by CoffeeScript.

```javascript
var coffeeScript = require('coffee-script');
var connectCoffeescript = require('connect-coffee-react');
var connect = require('connect');

var app = connect();

app.use(connectCoffeescript({
  src: __dirname,
  dest: __dirname + '/public',
  compile: compile
}));

app.use(connect.static(__dirname + '/public'));
```